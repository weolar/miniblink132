// services/viz/privileged/mojom/gl/gpu_host.mojom-test-utils.h is auto generated by mojom_bindings_generator.py, do not edit

// Copyright 2019 The Chromium Authors
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

#ifndef SERVICES_VIZ_PRIVILEGED_MOJOM_GL_GPU_HOST_MOJOM_TEST_UTILS_H_
#define SERVICES_VIZ_PRIVILEGED_MOJOM_GL_GPU_HOST_MOJOM_TEST_UTILS_H_

#include "services/viz/privileged/mojom/gl/gpu_host.mojom.h"

namespace viz::mojom {

class GpuHostInterceptorForTesting : public GpuHost {
    virtual GpuHost* GetForwardingInterface() = 0;
    void DidInitialize(const ::gpu::GPUInfo& gpu_info, const ::gpu::GpuFeatureInfo& gpu_feature_info,
        const std::optional<::gpu::GPUInfo>& gpu_info_for_hardware_gpu, const std::optional<::gpu::GpuFeatureInfo>& gpu_feature_info_for_hardware_gpu,
        const ::gfx::GpuExtraInfo& gpu_extra_info) override;
    void DidFailInitialize() override;
    void DidCreateContextSuccessfully() override;
    void DidCreateOffscreenContext(const ::GURL& url) override;
    void DidDestroyOffscreenContext(const ::GURL& url) override;
    void DidDestroyChannel(int32_t client_id) override;
    void DidDestroyAllChannels() override;
    void DidLoseContext(::gpu::error::ContextLostReason reason, const ::GURL& active_url) override;
    void DidUpdateGPUInfo(const ::gpu::GPUInfo& gpu_info) override;
    void DidUpdateOverlayInfo(const ::gpu::OverlayInfo& overlay_info) override;
    void DidUpdateDXGIInfo(::gfx::mojom::DXGIInfoPtr dxgi_info) override;
    void DisableGpuCompositing() override;
    void GetIsolationKey(int32_t client_id, const ::blink::WebGPUExecutionContextToken& wgpu_context_token, GetIsolationKeyCallback callback) override;
    void StoreBlobToDisk(const ::gpu::GpuDiskCacheHandle& cache_handle, const std::string& key, const std::string& blob) override;
    void RecordLogMessage(int32_t severity, const std::string& header, const std::string& message) override;
    void ClearGrShaderDiskCache() override;
};
class GpuHostAsyncWaiter {
public:
    explicit GpuHostAsyncWaiter(GpuHost* proxy);

    GpuHostAsyncWaiter(const GpuHostAsyncWaiter&) = delete;
    GpuHostAsyncWaiter& operator=(const GpuHostAsyncWaiter&) = delete;

    ~GpuHostAsyncWaiter();
    void GetIsolationKey(int32_t client_id, const ::blink::WebGPUExecutionContextToken& wgpu_context_token, std::string* out_isolation_key);
    std::string GetIsolationKey(int32_t client_id, const ::blink::WebGPUExecutionContextToken& wgpu_context_token);

private:
    GpuHost* const proxy_;
};

} // viz::mojom

#endif // SERVICES_VIZ_PRIVILEGED_MOJOM_GL_GPU_HOST_MOJOM_TEST_UTILS_H_
